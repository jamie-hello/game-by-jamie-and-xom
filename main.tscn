[gd_scene load_steps=21 format=3 uid="uid://2v74n5qo7jyh"]

[ext_resource type="Script" path="res://main.gd" id="1_63v1i"]
[ext_resource type="PackedScene" uid="uid://b8aykduqsqo68" path="res://word_ai.tscn" id="2_374l1"]
[ext_resource type="Script" path="res://phase_singleton.gd" id="4_6gvyf"]
[ext_resource type="PackedScene" uid="uid://cnfeyum3ky12d" path="res://board.tscn" id="5_2uyb6"]
[ext_resource type="Script" path="res://Sack.gd" id="7_iudja"]
[ext_resource type="Texture2D" uid="uid://cxre1hq4skr8f" path="res://img/sack.png" id="8_4rhig"]
[ext_resource type="Script" path="res://dealerUI.gd" id="8_r8kwx"]
[ext_resource type="Texture2D" uid="uid://c87tx7xfu7e5i" path="res://img/tile hi-res.png" id="9_kmoio"]
[ext_resource type="AudioStream" uid="uid://leb2tjo4ym5k" path="res://sounds/mahjongclacks.wav" id="11_uf8cn"]
[ext_resource type="Script" path="res://sounds/playedtiles.gd" id="12_84e8n"]
[ext_resource type="AudioStream" uid="uid://cyojesm6hdpff" path="res://sounds/clicktiletoplayerhand.wav" id="13_8u22v"]
[ext_resource type="Script" path="res://sounds/clicktiletoplayerhand.gd" id="14_v03jb"]
[ext_resource type="AudioStream" uid="uid://l7lrkeqq301a" path="res://sounds/PII-FX-Crystal05.ogg" id="15_dkyax"]
[ext_resource type="PackedScene" uid="uid://dcvk0hmraq7o1" path="res://tile.tscn" id="15_rrxli"]
[ext_resource type="Script" path="res://sounds/refresh_hand.gd" id="16_3e3ur"]
[ext_resource type="Script" path="res://bag.gd" id="16_o01yg"]
[ext_resource type="PackedScene" uid="uid://c1vhlig43wshy" path="res://deal_zone_player.tscn" id="16_pu1g3"]
[ext_resource type="AudioStream" uid="uid://ck7p2mmpj2f7f" path="res://sounds/POL-end-of-time-short.wav" id="17_cdye7"]

[sub_resource type="CircleShape2D" id="CircleShape2D_jt3yh"]
radius = 1.0

[sub_resource type="Theme" id="Theme_6hi3u"]

[node name="Main" type="Node"]
script = ExtResource("1_63v1i")

[node name="WordAI" parent="." instance=ExtResource("2_374l1")]

[node name="PhaseSingleton" type="Node" parent="."]
script = ExtResource("4_6gvyf")

[node name="TimerFirstTurn1" type="Timer" parent="PhaseSingleton"]
one_shot = true

[node name="TimerFirstTurn2" type="Timer" parent="PhaseSingleton"]
one_shot = true

[node name="TimerFirstTurn3" type="Timer" parent="PhaseSingleton"]
one_shot = true

[node name="Bag" type="Node2D" parent="."]
script = ExtResource("16_o01yg")

[node name="Timer" type="Timer" parent="."]
one_shot = true
autostart = true

[node name="Board" parent="." instance=ExtResource("5_2uyb6")]
position = Vector2(536, 241)
scale = Vector2(0.565, 0.565)

[node name="Sack" type="Sprite2D" parent="."]
position = Vector2(216, 141)
scale = Vector2(0.39, 0.441667)
texture = ExtResource("8_4rhig")
script = ExtResource("7_iudja")

[node name="clicksprite" parent="Sack" instance_placeholder="res://clicksprite.tscn"]
position = Vector2(-35.8974, 11.3207)

[node name="Area2D" type="Area2D" parent="Sack"]
collision_layer = 4
collision_mask = 4

[node name="CollisionShape2D" type="CollisionShape2D" parent="Sack/Area2D"]
shape = SubResource("CircleShape2D_jt3yh")

[node name="Tile" parent="." instance=ExtResource("15_rrxli")]

[node name="dealerUI" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0
script = ExtResource("8_r8kwx")

[node name="DealZone Player1" parent="dealerUI" instance=ExtResource("16_pu1g3")]
position = Vector2(120, 659)

[node name="DealZone Player2" parent="dealerUI" instance=ExtResource("16_pu1g3")]
position = Vector2(397, 644)

[node name="DealZone Player3" parent="dealerUI" instance=ExtResource("16_pu1g3")]
position = Vector2(669, 678)

[node name="TileHi-res" type="Sprite2D" parent="."]
position = Vector2(934, 308)
texture = ExtResource("9_kmoio")

[node name="RichTextLabel" type="RichTextLabel" parent="TileHi-res"]
offset_left = -24.0
offset_top = -14.0
offset_right = 40.0
offset_bottom = 40.0
theme = SubResource("Theme_6hi3u")
text = "Q"

[node name="RichTextLabel2" type="RichTextLabel" parent="TileHi-res"]
offset_left = 35.0
offset_top = 39.0
offset_right = 70.0
offset_bottom = 67.0
text = "10"

[node name="TileHi-res2" type="Sprite2D" parent="."]
position = Vector2(790, 137)
scale = Vector2(0.246599, 0.253448)
texture = ExtResource("9_kmoio")

[node name="RichTextLabel" type="RichTextLabel" parent="TileHi-res2"]
offset_left = -12.0
offset_top = -20.0
offset_right = 28.0
offset_bottom = 8.0
text = "Q"

[node name="RichTextLabel2" type="RichTextLabel" parent="TileHi-res2"]
offset_left = 45.0
offset_top = 39.0
offset_right = 77.0
offset_bottom = 75.0
text = "10"

[node name="playedtiles" type="AudioStreamPlayer" parent="."]
stream = ExtResource("11_uf8cn")
script = ExtResource("12_84e8n")

[node name="clicktiletoplayerhand" type="AudioStreamPlayer" parent="."]
stream = ExtResource("13_8u22v")
script = ExtResource("14_v03jb")

[node name="refresh_hand" type="AudioStreamPlayer" parent="."]
stream = ExtResource("15_dkyax")
script = ExtResource("16_3e3ur")

[node name="music" type="AudioStreamPlayer" parent="."]
stream = ExtResource("17_cdye7")
volume_db = -14.991
autoplay = true

[connection signal="timeout" from="PhaseSingleton/TimerFirstTurn1" to="PhaseSingleton" method="_on_timer_first_turn_1_timeout"]
[connection signal="timeout" from="PhaseSingleton/TimerFirstTurn2" to="PhaseSingleton" method="_on_timer_first_turn_2_timeout"]
[connection signal="timeout" from="PhaseSingleton/TimerFirstTurn3" to="PhaseSingleton" method="_on_timer_first_turn_3_timeout"]
[connection signal="draw7" from="Bag" to="refresh_hand" method="_on_bag_draw_7"]
[connection signal="timeout" from="Timer" to="PhaseSingleton" method="_on_timer_timeout"]
[connection signal="clicktiletoplayerhand" from="dealerUI/DealZone Player1" to="clicktiletoplayerhand" method="_on_deal_zone_player_1_clicktiletoplayerhand"]
[connection signal="played_tiles_sound" from="dealerUI/DealZone Player1" to="playedtiles" method="_on_deal_zone_player_1_played_tiles_sound"]
[connection signal="clicktiletoplayerhand" from="dealerUI/DealZone Player2" to="clicktiletoplayerhand" method="_on_deal_zone_player_1_clicktiletoplayerhand"]
[connection signal="played_tiles_sound" from="dealerUI/DealZone Player2" to="playedtiles" method="_on_deal_zone_player_1_played_tiles_sound"]
[connection signal="clicktiletoplayerhand" from="dealerUI/DealZone Player3" to="clicktiletoplayerhand" method="_on_deal_zone_player_1_clicktiletoplayerhand"]
[connection signal="played_tiles_sound" from="dealerUI/DealZone Player3" to="playedtiles" method="_on_deal_zone_player_1_played_tiles_sound"]
